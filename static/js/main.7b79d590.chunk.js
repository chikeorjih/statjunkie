(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,a,t){e.exports=t(98)},43:function(e,a,t){},98:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t.n(s),r=t(13),i=t.n(r),o=(t(43),t(4)),l=t(5),c=t(7),m=t(6),u=t(8),d=function(e){var a=e.ranking&&e.ranking.slice(0,-2),t=100-100*((a-1)/31).toFixed(2),s=a>0&&a<11?"#80c762":a>10&&a<20?"#ecc05b":"#ec1c1c",r={width:"".concat(t,"%"),height:"100%",background:s};return n.a.createElement("div",{className:"rank-chart"},n.a.createElement("div",{className:"label"},e.label),n.a.createElement("div",{className:"chart"},n.a.createElement("span",{className:"fill",style:r}),n.a.createElement("span",{className:"rank-tag"},e.ranking)))},g=function(e){var a=e.ranking&&e.ranking.slice(0,-2),t={background:a>0&&a<11?"#80c762":a>10&&a<20?"#ecc05b":"#ec1c1c"};return n.a.createElement("div",{className:"rank-stat"},n.a.createElement("div",{className:"label"},e.label),n.a.createElement("div",{className:"stat"},n.a.createElement("span",null,e.ranking),n.a.createElement("span",{style:t},e.stat)))},p=t(16),h=function(e){var a=Object(s.useState)(!1),t=Object(p.a)(a,2),r=t[0],i=t[1],o=function(){i(!0!==r)},l=function(a){var t=a.currentTarget.dataset.teamid;e.updateTeam(t)},c=e.list.map(function(e,a){return n.a.createElement("li",{key:a,"data-teamid":e.id,onClick:l},e.name)}),m=r?"caret open":"caret closed",u=r?"dropdown-list open":"dropdown-list closed",d=void 0!==e.label&&e.label.length<8?"label":"label large";return n.a.createElement("div",{className:"dropdown",onClick:o},n.a.createElement("span",{className:d},e.label),n.a.createElement("span",{className:m}),n.a.createElement("ul",{className:u},n.a.createElement("li",{className:"close"},n.a.createElement("button",{onClick:o},"Close")),c))},v=[{name:"Anaheim Ducks",id:24},{name:"Arizona Coyotes",id:53},{name:"Boston Bruins",id:6},{name:"Buffalo Sabres",id:7},{name:"Calgary Flames",id:20},{name:"Carolina Hurricanes",id:12},{name:"Chicago Blackhawks",id:16},{name:"Colorado Avalanche",id:21},{name:"Columbus Blue Jackets",id:29},{name:"Dallas Stars",id:25},{name:"Detroit Red Wings",id:17},{name:"Edmonton Oilers",id:22},{name:"Florida Panthers",id:13},{name:"Los Angeles Kings",id:26},{name:"Minnesota Wild",id:30},{name:"Montreal Canadiens",id:8},{name:"Nashville Predators",id:18},{name:"New Jersey Devils",id:1},{name:"New York Islanders",id:2},{name:"New York Rangers",id:3},{name:"Ottawa Senators",id:9},{name:"Philadelphia Flyers",id:4},{name:"Pittsburgh Penguins",id:5},{name:"San Jose Sharks",id:28},{name:"St. Louis Blues",id:19},{name:"Tampa Bay Lightning",id:14},{name:"Toronto Maple Leafs",id:10},{name:"Vancouver Canucks",id:23},{name:"Vegas Golden Knights",id:54},{name:"Washington Capitals",id:15},{name:"Winnipeg Jets",id:52}],f=function(e){var a=Object(s.useState)(!1),t=Object(p.a)(a,2),r=t[0],i=t[1],o=r?"".concat(e.cssName," loaded"):e.cssName;return n.a.createElement("img",{className:o,onLoad:function(){i(!0)},alt:"player",src:"".concat(e.url).concat(e.player,".").concat(e.type)})},S=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(L.Consumer,null,function(a){var t=a.state.teamInfo,s=t.stats,r=a.state.isLoading?"loading":"loaded";return n.a.createElement("div",{className:"team-info ".concat(r)},n.a.createElement("div",{className:"team-details"},n.a.createElement("div",{className:"details"},n.a.createElement(f,{cssName:"logo",url:"https://www-league.nhlstatic.com/images/logos/teams-current-primary-dark/",player:e.props.teamId,type:"svg"}),n.a.createElement("div",{className:"team-name"},n.a.createElement("span",null,t.city),n.a.createElement("span",{className:"name"},n.a.createElement(h,{label:t.teamName,list:v,updateTeam:a.updateTeam})),n.a.createElement("div",{className:"record"},n.a.createElement("span",null,s.pts," pts"),n.a.createElement("span",null,s.wins,"-",s.losses,"-",s.ot)))),n.a.createElement("div",{className:"rankings"},n.a.createElement(d,{label:"Goals For",ranking:t.ranks.goalsPerGame}),n.a.createElement(d,{label:"Goals Against",ranking:t.ranks.goalsAgainstPerGame}),n.a.createElement(d,{label:"Powerplay",ranking:t.ranks.powerPlayPercentage}),n.a.createElement(d,{label:"Penalty Kill",ranking:t.ranks.penaltyKillPercentage})),n.a.createElement("div",{className:"rankings row"},n.a.createElement(g,{label:"FaceOffs",ranking:t.ranks.faceOffWinPercentage,stat:"".concat(t.stats.faceOffWinPercentage,"%")}),n.a.createElement(g,{label:"Possession",ranking:t.ranks.evGGARatio,stat:"".concat(t.stats.evGGARatio)}),n.a.createElement(g,{label:"Shooting %",ranking:t.ranks.shootingPctRank,stat:"".concat(t.stats.shootingPctg,"%")}),n.a.createElement(g,{label:"Save %",ranking:t.ranks.savePctRank,stat:"".concat(t.stats.savePctg,"%")}))))})}}]),a}(s.Component),y=t(14),E=t.n(y);function b(e,a){var t=e.stats[0].splits.filter(function(e){return e.season===a.currentSeason&&e.team.id===parseInt(a.currentTeam)&&133===e.league.id});return void 0!==t[0]?t[0].stat:{games:0,goals:0,assists:0,points:0,plusMinus:0}}function k(e){for(var a=e.stats[0].splits.filter(function(e){return 133===e.league.id}),t={games:0,goals:0,assists:0,points:0},s={games:0,goals:0,assists:0,points:0,actuals:[]},n=0,r=a.length;n<r;n++)Object.assign(t,{games:t.games+a[n].stat.games,goals:t.goals+a[n].stat.goals,assists:t.assists+a[n].stat.assists,points:t.points+a[n].stat.points});for(var i=Math.max(a.length-4,0),o=a.length-1;i<o;i++)Object.assign(s,{games:s.games+a[i].stat.games,goals:s.goals+a[i].stat.goals,assists:s.assists+a[i].stat.assists,points:s.points+a[i].stat.points}),s.actuals.push({games:a[i].stat.games,goals:a[i].stat.goals,assists:a[i].stat.assists,points:a[i].stat.points});var l={goals:C(t.goals,t.games),assists:C(t.assists,t.games),points:C(t.points,t.games)},c={goals:C(s.goals,s.games),assists:C(s.assists,s.games),points:C(s.points,s.games)};return{totalStats:t,careerAverages:l,trailingCareerAverages:c,standardDeviation:function(e,a){for(var t={games:0,goals:0,assists:0,points:0},s=e.actuals.map(function(e){return{games:e.games,goals:Math.pow(C(e.goals,e.games)-a.goals,2),assists:Math.pow(C(e.assists,e.games)-a.assists,2),points:Math.pow(C(e.points,e.games)-a.points,2)}}),n=0,r=s.length;n<r;n++)Object.assign(t,{games:Math.round(100*Math.sqrt((t.games+s[n].games)/s.length))/100,goals:Math.round(100*Math.sqrt((t.goals+s[n].goals)/s.length))/100,assists:Math.round(100*Math.sqrt((t.assists+s[n].assists)/s.length))/100,points:Math.round(100*Math.sqrt((t.points+s[n].points)/s.length))/100});return t}(s,c)}}function P(e){for(var a=e.stats[0].splits.filter(function(e){return 133===e.league.id&&e.stat.games>10}),t=a.length-1>3?4:a.length,s={games:0,saveP:0,gaa:0},n={games:0,saveP:0,gaa:0},r=0,i=a.length;r<i;r++)Object.assign(s,{games:s.games+a[r].stat.games,saveP:s.saveP+a[r].stat.savePercentage,gaa:s.gaa+a[r].stat.goalAgainstAverage});for(var o=Math.max(a.length-1-3,0),l=a.length;o<l;o++)Object.assign(n,{games:n.games+a[o].stat.games,saveP:n.saveP+a[o].stat.savePercentage,gaa:n.gaa+a[o].stat.goalAgainstAverage});return{totalStats:s,trailingCareerAverages:{saveP:Math.round(n.saveP/t*1e3)/1e3,gaa:Math.round(n.gaa/t*1e3)/1e3}}}function C(e,a){return 0!==e&&0!==a?Math.round(e/a*100)/100:0}function N(e,a){return 0!==(e=void 0!==e?e:0)&&0!==a?Math.round(e/a*82):0}var w={getTeaminfo:function(e){return{city:e.teams[0].locationName,teamName:e.teams[0].teamName,venue:e.teams[0].venue.name,division:e.teams[0].division,conference:e.teams[0].conference,stats:e.teams[0].teamStats[0].splits[0].stat,ranks:e.teams[0].teamStats[0].splits[1].stat}},getPlayerDetails:function(e,a,t){var s=[];return s=e.teams[0].franchise.roster.roster.map(function(e){return{name:e.person.fullName,details:e.person,currentStats:b(e.person,a),careerStats:"G"===e.position.code?P(e.person):k(e.person)}}),t?s.filter(function(e){return"G"===e.details.primaryPosition.code}):s.filter(function(e){return"G"!==e.details.primaryPosition.code})},getSummary:function(e,a){return a?function(e){return e.map(function(e){return{picture:e.details.id,name:e.name,position:e.details.primaryPosition.code,gp:e.currentStats.games,w:e.currentStats.wins,l:e.currentStats.losses,so:e.currentStats.shutouts,gaa:e.currentStats.goalAgainstAverage,svP:e.currentStats.savePercentage,sa:e.currentStats.shotsAgainst,pkSv:Math.round(10*e.currentStats.shortHandedSavePercentage)/1e3,trailingCareerAverages:{saveP:e.careerStats.trailingCareerAverages.saveP,gaa:e.careerStats.trailingCareerAverages.gaa}}})}(e):function(e){return e.map(function(e){return{picture:e.details.id,name:{name:e.name,id:e.details.id},position:e.details.primaryPosition.code,gp:e.currentStats.games,goals:e.currentStats.goals,assists:e.currentStats.assists,points:e.currentStats.points,plusMinus:e.currentStats.plusMinus,projections:{goals:N(e.currentStats.goals,e.currentStats.games),assists:N(e.currentStats.assists,e.currentStats.games),points:N(e.currentStats.points,e.currentStats.games)},averages:{goals:C(e.currentStats.goals,e.currentStats.games),assists:C(e.currentStats.assists,e.currentStats.games),points:C(e.currentStats.points,e.currentStats.games)},careerAverages:{goals:e.careerStats.careerAverages.goals,assists:e.careerStats.careerAverages.assists,points:e.careerStats.careerAverages.points},trailingCareerAverages:{goals:e.careerStats.trailingCareerAverages.goals,assists:e.careerStats.trailingCareerAverages.assists,points:e.careerStats.trailingCareerAverages.points},standardDeviation:{goals:e.careerStats.standardDeviation.goals,assists:e.careerStats.standardDeviation.assists,points:e.careerStats.standardDeviation.points}}})}(e)}},O=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"showPlayerModal",value:function(e){var a=e.currentTarget.dataset.playerid;this.props.showPlayerModal(a)}},{key:"render",value:function(){var e=this;return n.a.createElement(L.Consumer,null,function(a){var t=w.getSummary(a.state.players,!1),s=function(e,a,t,s){var r="";return e<=a-.0244?r="poor":e>=a+.0244&&(r="good"),n.a.createElement("span",{className:r},t)},r=function(e,a,t,s){return"asc"===a?"sort-asc":"sort-desc"},i=[{dataField:"picture",text:"",formatter:function(e,a){return n.a.createElement(f,{cssName:"player",url:"https://nhl.bamcontent.com/images/headshots/current/60x60/",player:e,type:"jpg"})}},{dataField:"name",text:"Player",sort:!0,headerSortingClasses:r,formatter:function(a,t){return n.a.createElement("button",{className:"player-name","data-playerid":a.id,onClick:e.showPlayerModal.bind(e)},a.name)}},{dataField:"position",text:"Pos",sort:!0,headerSortingClasses:r},{dataField:"gp",text:"GP",sort:!0,headerSortingClasses:r},{dataField:"goals",text:"G",sort:!0,headerSortingClasses:r,formatter:function(e,a){return s(a.averages.goals,a.trailingCareerAverages.goals,e,a.standardDeviation.goals)}},{dataField:"assists",text:"A",sort:!0,headerSortingClasses:r,formatter:function(e,a){return s(a.averages.assists,a.trailingCareerAverages.assists,e,a.standardDeviation.assists)}},{dataField:"points",text:"Pts",sort:!0,headerSortingClasses:r,formatter:function(e,a){return s(a.averages.points,a.trailingCareerAverages.points,e,a.standardDeviation.points)}},{dataField:"plusMinus",text:"+/-",sort:!0,headerSortingClasses:r},{dataField:"averages.points",text:"Pts/G.",sort:!0,headerSortingClasses:r},{dataField:"projections.goals",text:"Pj.G",sort:!0,headerSortingClasses:r},{dataField:"projections.assists",text:"Pj.A",sort:!0,headerSortingClasses:r},{dataField:"projections.points",text:"Pj.Pts",sort:!0,headerSortingClasses:r},{dataField:"careerAverages.points",text:"Career",sort:!0,headerSortingClasses:r}];return n.a.createElement("div",{className:"team-content"},n.a.createElement("div",{className:"roster-stats"},n.a.createElement(E.a,{keyField:"picture",data:t,columns:i,defaultSorted:[{dataField:"points",order:"desc"}]}),n.a.createElement("div",{className:"legend"},n.a.createElement("div",null,n.a.createElement("span",{className:"good"})," Outperforming recent pace (last 3 years)"),n.a.createElement("div",null,n.a.createElement("span",{className:"poor"})," Underperforming recent pace (last 3 years)"))))})}}]),a}(s.Component),j=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(L.Consumer,null,function(e){var a=w.getSummary(e.state.goalies,!0),t=function(e,a,t,s){return"asc"===a?"sort-asc":"sort-desc"},s=[{dataField:"picture",text:"",formatter:function(e,a){return n.a.createElement(f,{cssName:"player",url:"https://nhl.bamcontent.com/images/headshots/current/60x60/",player:e,type:"jpg"})}},{dataField:"name",text:"Player",sort:!0,headerSortingClasses:t},{dataField:"position",text:"Pos",sort:!0,headerSortingClasses:t},{dataField:"gp",text:"GP",sort:!0,headerSortingClasses:t},{dataField:"w",text:"W",sort:!0,headerSortingClasses:t},{dataField:"l",text:"L",sort:!0,headerSortingClasses:t},{dataField:"so",text:"SO",sort:!0,headerSortingClasses:t},{dataField:"svP",text:"SV%",sort:!0,headerSortingClasses:t,formatter:function(e,a){return function(e,a,t,s){var r="";return e>a+.01?r="good":e<a-.01&&(r="poor"),n.a.createElement("span",{className:r},t)}(a.svP,a.trailingCareerAverages.saveP,e)}},{dataField:"gaa",text:"GAA",sort:!0,headerSortingClasses:t,formatter:function(e,a){return function(e,a,t,s){var r="";return e<a-.1?r="good":e>a+.1&&(r="poor"),n.a.createElement("span",{className:r},t)}(a.gaa,a.trailingCareerAverages.gaa,e)}},{dataField:"sa",text:"SA",sort:!0,headerSortingClasses:t},{dataField:"pkSv",text:"PKSV%",sort:!0,headerSortingClasses:t}];return n.a.createElement("div",{className:"team-content"},n.a.createElement("div",{className:"roster-stats goalie"},n.a.createElement(E.a,{keyField:"picture",data:a,columns:s,defaultSorted:[{dataField:"gp",order:"desc"}]}),n.a.createElement("div",{className:"legend"},n.a.createElement("div",null,n.a.createElement("span",{className:"good"})," Outperforming recent pace (last 3 years)"),n.a.createElement("div",null,n.a.createElement("span",{className:"poor"})," Underperforming recent pace (last 3 years)"))))})}}]),a}(s.Component),A=function(e){var a=function(a){e.updatePlayers(a)};return n.a.createElement(L.Consumer,null,function(e){var t=e.state.showGoalies,s=function(e){return t===e?"active":""};return n.a.createElement("div",{className:"players-toggle"},n.a.createElement("div",{className:"toggle"},n.a.createElement("button",{className:s(!1),onClick:a.bind(void 0,!1)},"Skaters"),n.a.createElement("button",{className:s(!0),onClick:a.bind(void 0,!0)},"Goalies")))})},M=t(23),x=t.n(M),F=t(37),T={callApi:function(){var e=Object(F.a)(x.a.mark(function e(a,t){var s;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a+t);case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}()},D=t(15),G=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(L.Consumer,null,function(a){return n.a.createElement("div",{className:"modal"},n.a.createElement("div",{className:"modal-bkg",onClick:function(){e.props.showModal(!1)}}),n.a.createElement("div",{className:"modal-content"},e.props.activePlayer.details.fullName))})}}]),a}(s.Component),L=n.a.createContext(null),B="https://statsapi.web.nhl.com/api/v1/teams/",I=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={isLoading:!1,error:null,currentTeam:void 0===t.props.currentTeam?"19":t.props.currentTeam,currentSeason:"20202021",teamData:null,playerData:null,players:[],goalies:[],teamInfo:{stats:{},ranks:{ranking:{}}},showGoalies:!1,playerModal:{isOpen:!1,activePlayer:{}}},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchTeamDetails()}},{key:"updateTeam",value:function(e){var a=this;this.setState({currentTeam:e.toString()},function(){Object(D.navigate)("/team/".concat(e)),a.fetchTeamDetails()})}},{key:"updatePlayers",value:function(e){this.setState({showGoalies:e})}},{key:"showPlayerModal",value:function(e){var a=this.state.players.filter(function(a){return a.details.id.toString()===e.toString()})[0];this.setState({playerModal:{isOpen:!0,activePlayer:a}})}},{key:"updateModal",value:function(e){this.setState({playerModal:{isOpen:e,activePlayer:{}}})}},{key:"fetchTeamDetails",value:function(){var e=this,a="".concat(this.state.currentTeam,"?expand=team.stats"),t="".concat(this.state.currentTeam,"?hydrate=franchise(roster(season=").concat(this.state.currentSeason,",person(name,stats(splits=[yearByYear]))))"),s={currentTeam:this.state.currentTeam,currentSeason:this.state.currentSeason};this.setState({isLoading:!0}),T.callApi(B,a).then(function(a){return e.setState({teamData:a,teamInfo:w.getTeaminfo(a),isLoading:!1})}).catch(function(a){return e.setState({error:a,isLoading:!1})}),T.callApi(B,t).then(function(a){return e.setState({playerData:a,players:w.getPlayerDetails(a,s,!1),goalies:w.getPlayerDetails(a,s,!0),isLoading:!1})}).catch(function(a){return e.setState({error:a,isLoading:!1})})}},{key:"render",value:function(){var e=this.state.showGoalies?n.a.createElement(j,{teamId:this.state.currentTeam}):n.a.createElement(O,{teamId:this.state.currentTeam,showPlayerModal:this.showPlayerModal.bind(this)}),a=this.state.playerModal.isOpen&&n.a.createElement(G,{showModal:this.updateModal.bind(this),activePlayer:this.state.playerModal.activePlayer});return n.a.createElement(L.Provider,{value:{state:this.state,updateTeam:this.updateTeam.bind(this)}},n.a.createElement("div",{className:"team"},n.a.createElement(S,{teamId:this.state.currentTeam}),n.a.createElement(A,{updatePlayers:this.updatePlayers.bind(this)}),e,a))}}]),a}(s.Component),W={"/":function(){return n.a.createElement(I,null)},"/statjunkie":function(){return n.a.createElement(I,null)},"/team":function(){return n.a.createElement(I,null)},"/team/:id":function(e){var a=e.id;return n.a.createElement(I,{currentTeam:a})}},R=function(){return Object(D.useRoutes)(W)||n.a.createElement("h1",null,"Stuff be broken yo!")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.7b79d590.chunk.js.map